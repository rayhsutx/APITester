{
    "actions": [
    {
        "type": "argument",
        "name": "pass parameters",
        "config": {
            "data": {
            	"cloud-host": "up.uat.kaisquare.com",
                "host": "192.168.1.210",
                "port": "80",
                "otp": "PRX5CX",
                "license": "XUHZS - CVP8F - UMJIW",
                "registration-number": "THF10P130531800076",
                "node-name": "Node TW 76",
                "dev-name": "Amtk170",
                "dev-host": "192.168.1.170",
                "dev-port": "80",
                "dev-user": "admin",
                "dev-password": "",
                "event-date-from": "13082014000000",
                "event-date-to": "13082014235959"
            }
        }
    },
    {
        "type": "http",
        "name": "registration",
        "config": {
            "url": "http://{{HOST}}/nodeapi/register",
            "data": {
                "otp": "{{OTP}}",
                "license-number": "{{LICENSE}}",
                "registration-number": "{{REGISTRATION-NUMBER}}",
                "device-name": "{{node-name}}",
                "device-address": "New Taipei",
                "device-latitude": "0",
                "device-longitude": "0"
            },
            "values": {
	        	"result": "result"
            },
	        "check": {
	        	"result": "ok"
	        }
        }
    },
    {
        "type": "http",
        "name": "login",
        "config": {
            "url": "http://{{host}}/api/kaisquare/login",
            "data": {
                "user-name": "admin",
                "password": "admin"
            },
            "values": {
            	"result": "result",
                "session": "session-key",
                "userid": "user-id"
            },
	        "check": {
	        	"result": "ok"
	        }
        }
    },
    {
    	"type": "http",
    	"name": "adddevice",
    	"config": {
    		"url": "http://{{host}}/api/kaisquare/adddevicetobucket",
    		"data": {
    			"session-key": "{{session}}",
		        "registration-number": "",
		        "device-name": "{{dev-name}}",
		        "model-id": "111",
		        "device-key": "",
		        "device-host": "{{dev-host}}",
		        "device-port": "{{dev-port}}",
		        "device-label": "",
		        "device-login": "{{dev-user}}",
		        "device-password": "{{dev-password}}",
		        "device-address": "New Taipei",
		        "device-latitude": "0",
		        "device-longitude": "0",
		        "cloud-recording-enabled": "true"
    		},
	    	"values": {
	    		"result": "result",
	    		"platform-device-id": "id",
	    		"core-device-id": "device-id"
	    	},
	    	"check": {
	    		"result": "ok",
	    		"platform-device-id": ":isdigit",
	    		"core-device-id": ":isdigit"
	    	}
    	}
    },
    {
    	"type": "http",
    	"name": "getlivevideourl",
    	"delay": 10000,
    	"retry": 3,
    	"config": {
    		"url": "http://{{host}}/api/kaisquare/getlivevideourl",
    		"data": {
    			"session-key": "{{session}}",
    			"device-id": "{{platform-device-id}}",
    			"channel-id": "0",
    			"stream-type": "rtmp/h264"
    		},
    		"values": {
    			"result": "result",
    			"video-url": "url:0"
    		},
    		"check": {
    			"result": "ok",
    			"video-url": ":notempty"
    		}
    	}
    },
    {
    	"type": "shell",
    	"name": "livevideo",
    	"config": {
    		"timeout": 10000,
    		"command": "/opt/local/bin/ffmpeg -i {{video-url}}",
    		"values": {
    			"resolution": "re:(\\d{3}x\\d{3})"
    		},
    		"check": {
    			"resolution": "640x480"
    		}
    	}
    },
    {
    	"type": "http",
    	"name": "addareaintrusion",
    	"config": {
    		"url": "http://{{host}}/api/kaisquare/addareaintrusion",
    		"data": {
    			"session-key": "{{session}}",
    			"device-id": "{{platform-device-id}}",
    			"channel-id": "0",
    			"thresholds": "{\"maskPercent\":10,\"mask-base64\":\"/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAEsAZADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKfHDNNkRRO+Ou1ScUN23HGLk7RVxlFTfYrz/n0m/79mmSQzQ4EsTpnpuUjNJST2ZcqVSKvKLXyGUUUUzMKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKltbS5vp1trSFpJHOAo/zxTrC0e/vYLOM4aZwmfTJ616pp2m2ml2y2tnEEUdT/Ex9Se5rhxuNWESSV2z6vhjhepxBOU5S5acd3u2+y+XXppozF0Hwda6cvn6isdzcHoCMon0B6n3roo4o4l2xRqi9cKMCnUV81Vr1K8uabuftuX5XhMrpKjhYKKX3v1e7CmyRRTLsmjV1PZhkU6istjvaUlZ7HGeLfC0MMJ1PS7fYE5miQcAf3gO2O9cbXshAYFWAIPBBrzDxLo50bUmhQHyJfniPt6fh/hX0GWYx1F7Gb1Wx+P8dcOQwUlmOEjaEtJJbJ9GvJ9fP1MqiiivYPzgKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDX8JwPPr9oE/gYufYAGvTq858D/wDIeT/rk/8AKvRq+bzd3rpeR+1+HdNRyuc1u5v8FEKKKK8s+9CiiigArnPHVqs2jC42ZaCVWB9AeD/MV0dZniYA6De5H/LL+orfCycK8Gu6PJz6hHE5XiKcv5Jfeldfijy2iiivsT+bQooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKANnwfcrb6/b7hxLuj+hI4/XFemV49bzyWtxFcxHDxOHX6g5r1qxvItQs4ryA/JKoYe3qPwPFeBnFJqcanfQ/XfDjHRlhquCb96L5l6NJP7mvxJ6KKK8Y/SwooooAKyPFlxHb6BdeYcGQCNR6kn/wDWfwq1qmsWGjwia9lK7shFUZZiPQV594h8Qz67OvyGK3iz5cecnPqff+VehgMJOtUjO3up7+h8fxZxDhctwdTDKSdWSaUe11u+2jur7mRRRRX1B+DhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFdh4C1UK0ukTOBuPmQ59f4h/X864+nRySQyLLE7I6EMrKcEH1rDE0FiKbps9XJc1qZNjYYuCvbdd091/l52PY6K5HS/HlsYFj1WKRZlGDJGuVb3x2NXv8AhONB/wCek3/fs18zLA4iDtys/c6HFOT4imqirxV+jdmvVM6Cq2oaha6Xavd3cm1F6Dux7ADua5y5+INmu4WlhLIf4S7BQfyzXJapq9/q83nXsxbH3UHCp9BXTh8rq1JXqqy/E8TOeO8Bg6LjgZe0qPbR8q829L+i38iTW9ZuNbvDczDaijbHGOir/j6ms+iivooQjTioxVkj8ZxOJq4urKvXlzSk7thRRRVGAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9k=\",\"mask-path\":\"[{\\\"x\\\":193,\\\"y\\\":152,\\\"beginPath\\\":true,\\\"tool\\\":\\\"brush\\\",\\\"globalAlpha\\\":0.5,\\\"globalCompositeOperation\\\":\\\"source-over\\\",\\\"strokeStyle\\\":\\\"red\\\",\\\"lineWidth\\\":15,\\\"lineCap\\\":\\\"round\\\",\\\"lineJoin\\\":\\\"round\\\",\\\"lapse\\\":0},{\\\"x\\\":194,\\\"y\\\":151,\\\"lapse\\\":145},{\\\"x\\\":196,\\\"y\\\":151,\\\"lapse\\\":16},{\\\"x\\\":198,\\\"y\\\":151,\\\"lapse\\\":17},{\\\"x\\\":199,\\\"y\\\":154,\\\"lapse\\\":17},{\\\"x\\\":200,\\\"y\\\":155,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":157,\\\"lapse\\\":17},{\\\"x\\\":201,\\\"y\\\":158,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":160,\\\"lapse\\\":17},{\\\"x\\\":201,\\\"y\\\":162,\\\"lapse\\\":33},{\\\"x\\\":201,\\\"y\\\":163,\\\"lapse\\\":2},{\\\"x\\\":201,\\\"y\\\":166,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":168,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":171,\\\"lapse\\\":18},{\\\"x\\\":200,\\\"y\\\":171,\\\"lapse\\\":16},{\\\"x\\\":200,\\\"y\\\":172,\\\"lapse\\\":32},{\\\"x\\\":199,\\\"y\\\":173,\\\"lapse\\\":17},{\\\"x\\\":196,\\\"y\\\":175,\\\"lapse\\\":17},{\\\"x\\\":194,\\\"y\\\":176,\\\"lapse\\\":16},{\\\"x\\\":191,\\\"y\\\":177,\\\"lapse\\\":17},{\\\"x\\\":188,\\\"y\\\":178,\\\"lapse\\\":17},{\\\"x\\\":186,\\\"y\\\":178,\\\"lapse\\\":16},{\\\"x\\\":183,\\\"y\\\":178,\\\"lapse\\\":17},{\\\"x\\\":181,\\\"y\\\":178,\\\"lapse\\\":16},{\\\"x\\\":179,\\\"y\\\":177,\\\"lapse\\\":17},{\\\"x\\\":178,\\\"y\\\":174,\\\"lapse\\\":16},{\\\"x\\\":176,\\\"y\\\":171,\\\"lapse\\\":17},{\\\"x\\\":176,\\\"y\\\":168,\\\"lapse\\\":18},{\\\"x\\\":175,\\\"y\\\":166,\\\"lapse\\\":15},{\\\"x\\\":175,\\\"y\\\":163,\\\"lapse\\\":17},{\\\"x\\\":175,\\\"y\\\":160,\\\"lapse\\\":17},{\\\"x\\\":175,\\\"y\\\":156,\\\"lapse\\\":17},{\\\"x\\\":175,\\\"y\\\":153,\\\"lapse\\\":16},{\\\"x\\\":175,\\\"y\\\":150,\\\"lapse\\\":16},{\\\"x\\\":176,\\\"y\\\":148,\\\"lapse\\\":17},{\\\"x\\\":179,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":182,\\\"y\\\":143,\\\"lapse\\\":16},{\\\"x\\\":186,\\\"y\\\":141,\\\"lapse\\\":17},{\\\"x\\\":189,\\\"y\\\":140,\\\"lapse\\\":16},{\\\"x\\\":192,\\\"y\\\":140,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":140,\\\"lapse\\\":17},{\\\"x\\\":197,\\\"y\\\":140,\\\"lapse\\\":16},{\\\"x\\\":200,\\\"y\\\":140,\\\"lapse\\\":17},{\\\"x\\\":201,\\\"y\\\":140,\\\"lapse\\\":16},{\\\"x\\\":203,\\\"y\\\":141,\\\"lapse\\\":17},{\\\"x\\\":203,\\\"y\\\":142,\\\"lapse\\\":17},{\\\"x\\\":205,\\\"y\\\":143,\\\"lapse\\\":17},{\\\"x\\\":206,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":207,\\\"y\\\":147,\\\"lapse\\\":16},{\\\"x\\\":208,\\\"y\\\":150,\\\"lapse\\\":17},{\\\"x\\\":209,\\\"y\\\":152,\\\"lapse\\\":17},{\\\"x\\\":209,\\\"y\\\":154,\\\"lapse\\\":16},{\\\"x\\\":210,\\\"y\\\":157,\\\"lapse\\\":17},{\\\"x\\\":210,\\\"y\\\":159,\\\"lapse\\\":17},{\\\"x\\\":210,\\\"y\\\":161,\\\"lapse\\\":16},{\\\"x\\\":210,\\\"y\\\":163,\\\"lapse\\\":18},{\\\"x\\\":210,\\\"y\\\":164,\\\"lapse\\\":15},{\\\"x\\\":209,\\\"y\\\":166,\\\"lapse\\\":17},{\\\"x\\\":209,\\\"y\\\":167,\\\"lapse\\\":18},{\\\"x\\\":207,\\\"y\\\":168,\\\"lapse\\\":15},{\\\"x\\\":206,\\\"y\\\":169,\\\"lapse\\\":18},{\\\"x\\\":205,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":204,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":202,\\\"y\\\":171,\\\"lapse\\\":17},{\\\"x\\\":200,\\\"y\\\":172,\\\"lapse\\\":16},{\\\"x\\\":198,\\\"y\\\":173,\\\"lapse\\\":17},{\\\"x\\\":196,\\\"y\\\":175,\\\"lapse\\\":17},{\\\"x\\\":193,\\\"y\\\":176,\\\"lapse\\\":18},{\\\"x\\\":191,\\\"y\\\":177,\\\"lapse\\\":14},{\\\"x\\\":189,\\\"y\\\":177,\\\"lapse\\\":18},{\\\"x\\\":188,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":186,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":184,\\\"y\\\":177,\\\"lapse\\\":17},{\\\"x\\\":182,\\\"y\\\":176,\\\"lapse\\\":17},{\\\"x\\\":181,\\\"y\\\":173,\\\"lapse\\\":16},{\\\"x\\\":180,\\\"y\\\":171,\\\"lapse\\\":17},{\\\"x\\\":179,\\\"y\\\":169,\\\"lapse\\\":20},{\\\"x\\\":178,\\\"y\\\":168,\\\"lapse\\\":14},{\\\"x\\\":177,\\\"y\\\":166,\\\"lapse\\\":16},{\\\"x\\\":177,\\\"y\\\":164,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":161,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":158,\\\"lapse\\\":16},{\\\"x\\\":178,\\\"y\\\":155,\\\"lapse\\\":17},{\\\"x\\\":180,\\\"y\\\":153,\\\"lapse\\\":16},{\\\"x\\\":182,\\\"y\\\":151,\\\"lapse\\\":17},{\\\"x\\\":184,\\\"y\\\":150,\\\"lapse\\\":16},{\\\"x\\\":186,\\\"y\\\":149,\\\"lapse\\\":17},{\\\"x\\\":188,\\\"y\\\":148,\\\"lapse\\\":16},{\\\"x\\\":190,\\\"y\\\":148,\\\"lapse\\\":18},{\\\"x\\\":192,\\\"y\\\":148,\\\"lapse\\\":15},{\\\"x\\\":193,\\\"y\\\":148,\\\"lapse\\\":19},{\\\"x\\\":195,\\\"y\\\":148,\\\"lapse\\\":14},{\\\"x\\\":196,\\\"y\\\":148,\\\"lapse\\\":19},{\\\"x\\\":198,\\\"y\\\":148,\\\"lapse\\\":15},{\\\"x\\\":199,\\\"y\\\":150,\\\"lapse\\\":17},{\\\"x\\\":200,\\\"y\\\":153,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":155,\\\"lapse\\\":17},{\\\"x\\\":202,\\\"y\\\":158,\\\"lapse\\\":17},{\\\"x\\\":202,\\\"y\\\":160,\\\"lapse\\\":16},{\\\"x\\\":202,\\\"y\\\":163,\\\"lapse\\\":17},{\\\"x\\\":202,\\\"y\\\":166,\\\"lapse\\\":16},{\\\"x\\\":202,\\\"y\\\":167,\\\"lapse\\\":16},{\\\"x\\\":202,\\\"y\\\":169,\\\"lapse\\\":18},{\\\"x\\\":202,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":202,\\\"y\\\":173,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":174,\\\"lapse\\\":17},{\\\"x\\\":200,\\\"y\\\":176,\\\"lapse\\\":17},{\\\"x\\\":198,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":197,\\\"y\\\":178,\\\"lapse\\\":17},{\\\"x\\\":196,\\\"y\\\":178,\\\"lapse\\\":33},{\\\"x\\\":193,\\\"y\\\":178,\\\"lapse\\\":33},{\\\"x\\\":190,\\\"y\\\":178,\\\"lapse\\\":37},{\\\"x\\\":189,\\\"y\\\":177,\\\"lapse\\\":14},{\\\"x\\\":188,\\\"y\\\":176,\\\"lapse\\\":16},{\\\"x\\\":188,\\\"y\\\":174,\\\"lapse\\\":16},{\\\"x\\\":187,\\\"y\\\":171,\\\"lapse\\\":17},{\\\"x\\\":187,\\\"y\\\":169,\\\"lapse\\\":19},{\\\"x\\\":187,\\\"y\\\":167,\\\"lapse\\\":15},{\\\"x\\\":187,\\\"y\\\":164,\\\"lapse\\\":16},{\\\"x\\\":187,\\\"y\\\":161,\\\"lapse\\\":16},{\\\"x\\\":187,\\\"y\\\":159,\\\"lapse\\\":17},{\\\"x\\\":187,\\\"y\\\":158,\\\"lapse\\\":16},{\\\"x\\\":189,\\\"y\\\":157,\\\"lapse\\\":17},{\\\"x\\\":190,\\\"y\\\":156,\\\"lapse\\\":17},{\\\"x\\\":191,\\\"y\\\":156,\\\"lapse\\\":16},{\\\"x\\\":191,\\\"y\\\":156,\\\"lapse\\\":17},{\\\"x\\\":192,\\\"y\\\":156,\\\"lapse\\\":16},{\\\"x\\\":193,\\\"y\\\":156,\\\"lapse\\\":34},{\\\"x\\\":194,\\\"y\\\":156,\\\"lapse\\\":16},{\\\"x\\\":194,\\\"y\\\":157,\\\"lapse\\\":34},{\\\"x\\\":195,\\\"y\\\":159,\\\"lapse\\\":18},{\\\"x\\\":195,\\\"y\\\":160,\\\"lapse\\\":15},{\\\"x\\\":195,\\\"y\\\":163,\\\"lapse\\\":20},{\\\"x\\\":195,\\\"y\\\":165,\\\"lapse\\\":14},{\\\"x\\\":195,\\\"y\\\":168,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":171,\\\"lapse\\\":17},{\\\"x\\\":193,\\\"y\\\":172,\\\"lapse\\\":17},{\\\"x\\\":192,\\\"y\\\":174,\\\"lapse\\\":16},{\\\"x\\\":191,\\\"y\\\":174,\\\"lapse\\\":17},{\\\"x\\\":189,\\\"y\\\":174,\\\"lapse\\\":16},{\\\"x\\\":188,\\\"y\\\":174,\\\"lapse\\\":17},{\\\"x\\\":186,\\\"y\\\":174,\\\"lapse\\\":17},{\\\"x\\\":185,\\\"y\\\":174,\\\"lapse\\\":17},{\\\"x\\\":184,\\\"y\\\":173,\\\"lapse\\\":16},{\\\"x\\\":182,\\\"y\\\":172,\\\"lapse\\\":18},{\\\"x\\\":181,\\\"y\\\":169,\\\"lapse\\\":15},{\\\"x\\\":179,\\\"y\\\":166,\\\"lapse\\\":18},{\\\"x\\\":177,\\\"y\\\":163,\\\"lapse\\\":15},{\\\"x\\\":177,\\\"y\\\":161,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":160,\\\"lapse\\\":16},{\\\"x\\\":177,\\\"y\\\":158,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":157,\\\"lapse\\\":16},{\\\"x\\\":177,\\\"y\\\":155,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":154,\\\"lapse\\\":17},{\\\"x\\\":177,\\\"y\\\":152,\\\"lapse\\\":17},{\\\"x\\\":178,\\\"y\\\":151,\\\"lapse\\\":16},{\\\"x\\\":179,\\\"y\\\":149,\\\"lapse\\\":16},{\\\"x\\\":181,\\\"y\\\":147,\\\"lapse\\\":17},{\\\"x\\\":182,\\\"y\\\":146,\\\"lapse\\\":17},{\\\"x\\\":183,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":184,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":185,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":186,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":187,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":188,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":189,\\\"y\\\":146,\\\"lapse\\\":17},{\\\"x\\\":190,\\\"y\\\":148,\\\"lapse\\\":17},{\\\"x\\\":192,\\\"y\\\":149,\\\"lapse\\\":16},{\\\"x\\\":193,\\\"y\\\":151,\\\"lapse\\\":17},{\\\"x\\\":194,\\\"y\\\":155,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":158,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":160,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":163,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":164,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":167,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":169,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":172,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":173,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":176,\\\"lapse\\\":18},{\\\"x\\\":195,\\\"y\\\":179,\\\"lapse\\\":15},{\\\"x\\\":195,\\\"y\\\":180,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":181,\\\"lapse\\\":16},{\\\"x\\\":194,\\\"y\\\":181,\\\"lapse\\\":17},{\\\"x\\\":193,\\\"y\\\":181,\\\"lapse\\\":33},{\\\"x\\\":192,\\\"y\\\":181,\\\"lapse\\\":17},{\\\"x\\\":191,\\\"y\\\":182,\\\"lapse\\\":17},{\\\"x\\\":190,\\\"y\\\":182,\\\"lapse\\\":16},{\\\"x\\\":188,\\\"y\\\":182,\\\"lapse\\\":17},{\\\"x\\\":186,\\\"y\\\":182,\\\"lapse\\\":16},{\\\"x\\\":186,\\\"y\\\":182,\\\"lapse\\\":33},{\\\"x\\\":184,\\\"y\\\":182,\\\"lapse\\\":453},{\\\"x\\\":184,\\\"y\\\":182,\\\"lapse\\\":117},{\\\"x\\\":183,\\\"y\\\":182,\\\"lapse\\\":16},{\\\"x\\\":182,\\\"y\\\":181,\\\"lapse\\\":17},{\\\"x\\\":180,\\\"y\\\":179,\\\"lapse\\\":16},{\\\"x\\\":179,\\\"y\\\":177,\\\"lapse\\\":17},{\\\"x\\\":178,\\\"y\\\":175,\\\"lapse\\\":16},{\\\"x\\\":177,\\\"y\\\":172,\\\"lapse\\\":17},{\\\"x\\\":175,\\\"y\\\":169,\\\"lapse\\\":26},{\\\"x\\\":174,\\\"y\\\":166,\\\"lapse\\\":7},{\\\"x\\\":174,\\\"y\\\":164,\\\"lapse\\\":17},{\\\"x\\\":173,\\\"y\\\":162,\\\"lapse\\\":17},{\\\"x\\\":173,\\\"y\\\":160,\\\"lapse\\\":17},{\\\"x\\\":173,\\\"y\\\":158,\\\"lapse\\\":16},{\\\"x\\\":173,\\\"y\\\":157,\\\"lapse\\\":17},{\\\"x\\\":173,\\\"y\\\":155,\\\"lapse\\\":16},{\\\"x\\\":173,\\\"y\\\":152,\\\"lapse\\\":17},{\\\"x\\\":174,\\\"y\\\":151,\\\"lapse\\\":16},{\\\"x\\\":176,\\\"y\\\":148,\\\"lapse\\\":16},{\\\"x\\\":179,\\\"y\\\":147,\\\"lapse\\\":17},{\\\"x\\\":181,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":183,\\\"y\\\":144,\\\"lapse\\\":17},{\\\"x\\\":184,\\\"y\\\":143,\\\"lapse\\\":16},{\\\"x\\\":187,\\\"y\\\":142,\\\"lapse\\\":18},{\\\"x\\\":189,\\\"y\\\":140,\\\"lapse\\\":15},{\\\"x\\\":192,\\\"y\\\":139,\\\"lapse\\\":18},{\\\"x\\\":196,\\\"y\\\":138,\\\"lapse\\\":16},{\\\"x\\\":198,\\\"y\\\":137,\\\"lapse\\\":21},{\\\"x\\\":200,\\\"y\\\":136,\\\"lapse\\\":19},{\\\"x\\\":200,\\\"y\\\":136,\\\"lapse\\\":10},{\\\"x\\\":202,\\\"y\\\":136,\\\"lapse\\\":33},{\\\"x\\\":203,\\\"y\\\":136,\\\"lapse\\\":16},{\\\"x\\\":205,\\\"y\\\":136,\\\"lapse\\\":17},{\\\"x\\\":206,\\\"y\\\":136,\\\"lapse\\\":16},{\\\"x\\\":207,\\\"y\\\":138,\\\"lapse\\\":17},{\\\"x\\\":209,\\\"y\\\":140,\\\"lapse\\\":16},{\\\"x\\\":210,\\\"y\\\":142,\\\"lapse\\\":17},{\\\"x\\\":212,\\\"y\\\":145,\\\"lapse\\\":17},{\\\"x\\\":213,\\\"y\\\":147,\\\"lapse\\\":16},{\\\"x\\\":214,\\\"y\\\":149,\\\"lapse\\\":18},{\\\"x\\\":214,\\\"y\\\":152,\\\"lapse\\\":16},{\\\"x\\\":215,\\\"y\\\":154,\\\"lapse\\\":17},{\\\"x\\\":215,\\\"y\\\":155,\\\"lapse\\\":16},{\\\"x\\\":215,\\\"y\\\":158,\\\"lapse\\\":16},{\\\"x\\\":215,\\\"y\\\":159,\\\"lapse\\\":17},{\\\"x\\\":215,\\\"y\\\":160,\\\"lapse\\\":16},{\\\"x\\\":215,\\\"y\\\":162,\\\"lapse\\\":17},{\\\"x\\\":215,\\\"y\\\":163,\\\"lapse\\\":17},{\\\"x\\\":214,\\\"y\\\":165,\\\"lapse\\\":17},{\\\"x\\\":213,\\\"y\\\":166,\\\"lapse\\\":17},{\\\"x\\\":211,\\\"y\\\":167,\\\"lapse\\\":17},{\\\"x\\\":209,\\\"y\\\":168,\\\"lapse\\\":15},{\\\"x\\\":208,\\\"y\\\":168,\\\"lapse\\\":17},{\\\"x\\\":207,\\\"y\\\":169,\\\"lapse\\\":18},{\\\"x\\\":206,\\\"y\\\":170,\\\"lapse\\\":16},{\\\"x\\\":206,\\\"y\\\":171,\\\"lapse\\\":15},{\\\"x\\\":205,\\\"y\\\":172,\\\"lapse\\\":17},{\\\"x\\\":204,\\\"y\\\":172,\\\"lapse\\\":17},{\\\"x\\\":201,\\\"y\\\":173,\\\"lapse\\\":18},{\\\"x\\\":200,\\\"y\\\":175,\\\"lapse\\\":15},{\\\"x\\\":198,\\\"y\\\":176,\\\"lapse\\\":19},{\\\"x\\\":197,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":196,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":195,\\\"y\\\":177,\\\"lapse\\\":42},{\\\"x\\\":194,\\\"y\\\":178,\\\"lapse\\\":5},{\\\"x\\\":193,\\\"y\\\":178,\\\"lapse\\\":16},{\\\"x\\\":192,\\\"y\\\":178,\\\"lapse\\\":9},{\\\"x\\\":191,\\\"y\\\":179,\\\"lapse\\\":10},{\\\"x\\\":190,\\\"y\\\":179,\\\"lapse\\\":39},{\\\"x\\\":188,\\\"y\\\":179,\\\"lapse\\\":12},{\\\"x\\\":186,\\\"y\\\":179,\\\"lapse\\\":18},{\\\"x\\\":185,\\\"y\\\":179,\\\"lapse\\\":14},{\\\"x\\\":184,\\\"y\\\":179,\\\"lapse\\\":21},{\\\"x\\\":183,\\\"y\\\":178,\\\"lapse\\\":13},{\\\"x\\\":182,\\\"y\\\":177,\\\"lapse\\\":16},{\\\"x\\\":181,\\\"y\\\":175,\\\"lapse\\\":18},{\\\"x\\\":180,\\\"y\\\":174,\\\"lapse\\\":25},{\\\"x\\\":179,\\\"y\\\":171,\\\"lapse\\\":7},{\\\"x\\\":179,\\\"y\\\":169,\\\"lapse\\\":17},{\\\"x\\\":178,\\\"y\\\":163,\\\"lapse\\\":17},{\\\"x\\\":176,\\\"y\\\":160,\\\"lapse\\\":16},{\\\"x\\\":175,\\\"y\\\":157,\\\"lapse\\\":17},{\\\"x\\\":175,\\\"y\\\":155,\\\"lapse\\\":17},{\\\"x\\\":174,\\\"y\\\":154,\\\"lapse\\\":16},{\\\"x\\\":174,\\\"y\\\":152,\\\"lapse\\\":34},{\\\"x\\\":174,\\\"y\\\":150,\\\"lapse\\\":12},{\\\"x\\\":174,\\\"y\\\":149,\\\"lapse\\\":5},{\\\"x\\\":174,\\\"y\\\":148,\\\"lapse\\\":22},{\\\"x\\\":174,\\\"y\\\":147,\\\"lapse\\\":10},{\\\"x\\\":174,\\\"y\\\":147,\\\"lapse\\\":34},{\\\"x\\\":174,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":174,\\\"y\\\":144,\\\"lapse\\\":16},{\\\"x\\\":175,\\\"y\\\":143,\\\"lapse\\\":29},{\\\"x\\\":176,\\\"y\\\":143,\\\"lapse\\\":8},{\\\"x\\\":179,\\\"y\\\":141,\\\"lapse\\\":13},{\\\"x\\\":180,\\\"y\\\":140,\\\"lapse\\\":17},{\\\"x\\\":183,\\\"y\\\":138,\\\"lapse\\\":17},{\\\"x\\\":185,\\\"y\\\":137,\\\"lapse\\\":16},{\\\"x\\\":185,\\\"y\\\":136,\\\"lapse\\\":17},{\\\"x\\\":188,\\\"y\\\":136,\\\"lapse\\\":16},{\\\"x\\\":190,\\\"y\\\":135,\\\"lapse\\\":40},{\\\"x\\\":192,\\\"y\\\":135,\\\"lapse\\\":9},{\\\"x\\\":194,\\\"y\\\":135,\\\"lapse\\\":17},{\\\"x\\\":196,\\\"y\\\":135,\\\"lapse\\\":17},{\\\"x\\\":197,\\\"y\\\":135,\\\"lapse\\\":16},{\\\"x\\\":200,\\\"y\\\":135,\\\"lapse\\\":33},{\\\"x\\\":202,\\\"y\\\":135,\\\"lapse\\\":32},{\\\"x\\\":202,\\\"y\\\":136,\\\"lapse\\\":17},{\\\"x\\\":204,\\\"y\\\":136,\\\"lapse\\\":4},{\\\"x\\\":204,\\\"y\\\":138,\\\"lapse\\\":16},{\\\"x\\\":206,\\\"y\\\":140,\\\"lapse\\\":15},{\\\"x\\\":207,\\\"y\\\":142,\\\"lapse\\\":17},{\\\"x\\\":208,\\\"y\\\":145,\\\"lapse\\\":16},{\\\"x\\\":209,\\\"y\\\":147,\\\"lapse\\\":17},{\\\"x\\\":210,\\\"y\\\":148,\\\"lapse\\\":34},{\\\"x\\\":210,\\\"y\\\":152,\\\"lapse\\\":27},{\\\"x\\\":210,\\\"y\\\":154,\\\"lapse\\\":5},{\\\"x\\\":210,\\\"y\\\":156,\\\"lapse\\\":19},{\\\"x\\\":210,\\\"y\\\":158,\\\"lapse\\\":23},{\\\"x\\\":210,\\\"y\\\":159,\\\"lapse\\\":11},{\\\"x\\\":210,\\\"y\\\":160,\\\"lapse\\\":18},{\\\"x\\\":210,\\\"y\\\":161,\\\"lapse\\\":29},{\\\"x\\\":210,\\\"y\\\":162,\\\"lapse\\\":22},{\\\"x\\\":210,\\\"y\\\":163,\\\"lapse\\\":16},{\\\"x\\\":210,\\\"y\\\":164,\\\"lapse\\\":14},{\\\"x\\\":210,\\\"y\\\":165,\\\"lapse\\\":23},{\\\"x\\\":208,\\\"y\\\":167,\\\"lapse\\\":38},{\\\"x\\\":208,\\\"y\\\":168,\\\"lapse\\\":11},{\\\"x\\\":206,\\\"y\\\":170,\\\"lapse\\\":11},{\\\"x\\\":205,\\\"y\\\":171,\\\"lapse\\\":14},{\\\"x\\\":205,\\\"y\\\":173,\\\"lapse\\\":17},{\\\"x\\\":204,\\\"y\\\":174,\\\"lapse\\\":16},{\\\"x\\\":203,\\\"y\\\":175,\\\"lapse\\\":17},{\\\"x\\\":202,\\\"y\\\":176,\\\"lapse\\\":16},{\\\"x\\\":201,\\\"y\\\":177,\\\"lapse\\\":21},{\\\"x\\\":200,\\\"y\\\":178,\\\"lapse\\\":12},{\\\"x\\\":199,\\\"y\\\":179,\\\"lapse\\\":17},{\\\"x\\\":197,\\\"y\\\":180,\\\"lapse\\\":19},{\\\"x\\\":196,\\\"y\\\":180,\\\"lapse\\\":15},{\\\"x\\\":196,\\\"y\\\":181,\\\"lapse\\\":17},{\\\"x\\\":195,\\\"y\\\":181,\\\"lapse\\\":21},{\\\"x\\\":193,\\\"y\\\":181,\\\"lapse\\\":28},{\\\"x\\\":191,\\\"y\\\":181,\\\"lapse\\\":33},{\\\"x\\\":190,\\\"y\\\":181,\\\"lapse\\\":16},{\\\"x\\\":189,\\\"y\\\":181,\\\"lapse\\\":34},{\\\"x\\\":189,\\\"y\\\":181,\\\"lapse\\\":33},{\\\"x\\\":189,\\\"y\\\":181,\\\"lapse\\\":199}]\",\"additional-params\":{}}",
    			"recurrence-rule": ""
    		},
    		"values": {
    			"result": "result"
    		},
    		"check": {
    			"result": "ok"
    		}
    	}
    },
    {
    	"type": "http",
    	"name": "getevents",
    	"delay": 15000,
    	"retry": 3,
    	"config": {
    		"url": "http://{{host}}/api/kaisquare/getevents",
    		"data": {
    			"session-key": "{{session}}",
    			"device-id": "{{platform-device-id}}",
    			"channel-id": "0",
    			"event-id": "",
    			"skip": "0",
    			"take": "1",
    			"bound": "",
    			"rad": "",
    			"from": "{{event-date-from}}",
    			"to": "{{event-date-to}}",
    			"fields": "time,deviceName,deviceId,channelId,type,patchEventVideoURL"
    		},
    		"values": {
    			"result": "result",
    			"event-video-url": "events:0:patchEventVideoURL"
    		},
    		"check": {
    			"result": "ok",
    			"event-video-url": ":notempty"
    		}
    	}
    },
    {
    	"type": "shell",
    	"name": "download-event-video",
    	"config": {
    		"command": "/opt/local/bin/curl -b {{__COOKIE__}} http://{{host}}{{event-video-url}} -o event.mp4"
    	}
    },
    {
    	"type": "shell",
    	"name": "check-event-video",
    	"config": {
    		"command": "/opt/local/bin/ffmpeg -i event.mp4",
    		"values": {
    			"resolution": "re:(\\d{3}x\\d{3})"
    		},
    		"check": {
    			"resolution": "640x480"
    		}
    	}
    },
    {
    	"type": "shell",
    	"name": "delete-event-video",
    	"config": {
    		"command": "rm event.mp4"
    	}
    },
    {
    	"type": "http",
    	"name": "removedevicefrombucket",
    	"config": {
    		"url": "http://{{host}}/api/kaisquare/removedevicefrombucket",
    		"data": {
    			"session-key": "{{session}}",
		        "device-id": "{{platform-device-id}}"
    		},
	    	"values": {
	    		"result": "result"
	    	},
	    	"check": {
	    		"result": "ok"
	    	}
    	}
    },
    {
        "type": "print",
        "name": "print variables",
        "config": {
        }
    }]
}
